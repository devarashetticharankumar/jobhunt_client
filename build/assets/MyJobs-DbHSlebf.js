import{u as S,r as d,g as L,j as e,H as $,m as j,L as x,A as f}from"./index-Dc3DlMvd.js";import{Q as C,B as n}from"./react-toastify.esm-XnmEAQu3.js";import{c as T,d as _,e as D,f as F,g as I,a as O}from"./index-NqCwrgSu.js";/* empty css                      */const z=()=>{const{user:c,getAccessTokenSilently:g,isAuthenticated:h,loginWithRedirect:b}=S(),[y,m]=d.useState([]),[k,N]=d.useState(""),[v,w]=d.useState(!0),[r,p]=d.useState(1),l=8;L(),d.useEffect(()=>{h?c&&(async()=>{try{const a=await g(),i=await fetch(`${f}/jobs/myJobs/${c.email}`,{headers:{Authorization:`Bearer ${a}`}});if(!i.ok)throw new Error("Failed");const A=await i.json();m(A)}catch(a){console.error("Error fetching jobs:",a),n.error("Failed to fetch jobs.")}finally{w(!1)}})():b()},[h,c,g,b]);const o=r*l,J=o-l,s=y.filter(t=>t.jobTitle.toLowerCase().includes(k.toLowerCase())),u=s.slice(J,o),P=()=>{o<s.length&&p(r+1)},E=()=>{r>1&&p(r-1)},M=async t=>{if(window.confirm("Are you sure you want to delete this job?"))try{(await fetch(`${f}/jobs/job/${t}`,{method:"DELETE"})).ok?(n.success("Job deleted successfully!"),m(y.filter(i=>i._id!==t))):n.error("Failed to delete.")}catch{n.error("Error deleting job.")}};return v?e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-10 px-4 sm:px-6 lg:px-8 transition-colors",children:[e.jsx($,{children:e.jsx("title",{children:"My Jobs | JobNirvana"})}),e.jsx(C,{}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Jobs"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage all your job postings in one place"})]}),e.jsx(x,{to:"/post-job",children:e.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-transform hover:scale-105",children:[e.jsx(T,{className:"text-xl"})," Post New Job"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 transition-colors",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-700/50",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(_,{className:"absolute left-4 top-3.5 text-gray-400 text-xl"}),e.jsx("input",{type:"text",placeholder:"Search by job title...",onChange:t=>N(t.target.value),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white transition-shadow shadow-sm placeholder-gray-400"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/80 dark:bg-gray-700/80 text-gray-600 dark:text-gray-300 text-sm uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4 font-semibold",children:"No."}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Job Title"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Company"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Salary"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.length>0?u.map((t,a)=>e.jsxs(j.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.05},className:"hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400",children:a+1+(r-1)*l}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t.jobTitle}),e.jsx("div",{className:"text-xs text-gray-400",children:t.employmentType})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300 flex items-center gap-2",children:t.companyName}),e.jsxs("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300",children:[t.minPrice,"k - ",t.maxPrice,"k"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(x,{to:`/edit-job/${t._id}`,children:e.jsx("button",{className:"p-2 text-blue-600 bg-blue-100 hover:bg-blue-600 hover:text-white dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-600 dark:hover:text-white rounded-lg transition-colors",title:"Edit",children:e.jsx(D,{className:"text-lg"})})}),e.jsx(x,{to:`/job-applicants/${t._id}`,children:e.jsx("button",{className:"p-2 text-purple-600 bg-purple-100 hover:bg-purple-600 hover:text-white dark:bg-purple-900/30 dark:text-purple-400 dark:hover:bg-purple-600 dark:hover:text-white rounded-lg transition-colors",title:"View Applicants",children:e.jsx(F,{className:"text-lg"})})}),e.jsx("button",{onClick:()=>M(t._id),className:"p-2 text-red-600 bg-red-100 hover:bg-red-600 hover:text-white dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-600 dark:hover:text-white rounded-lg transition-colors",title:"Delete",children:e.jsx(I,{className:"text-lg"})})]})})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(O,{className:"text-6xl text-gray-200 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg",children:"No jobs found."})]})})})})]})}),s.length>l&&e.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 flex justify-center gap-4 bg-gray-50/50 dark:bg-gray-700/50",children:[e.jsx("button",{onClick:E,disabled:r===1,className:`px-4 py-2 rounded-lg font-medium transition ${r===1?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-white dark:bg-gray-800 border dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm text-gray-700 dark:text-gray-300"}`,children:"Previous"}),e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-300",children:["Page ",r," of ",Math.ceil(s.length/l)]}),e.jsx("button",{onClick:P,disabled:o>=s.length,className:`px-4 py-2 rounded-lg font-medium transition ${o>=s.length?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-white dark:bg-gray-800 border dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm text-gray-700 dark:text-gray-300"}`,children:"Next"})]})]})]})]})};export{z as default};
