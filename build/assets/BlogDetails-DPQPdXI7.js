import{j as e,I as D,e as k,r,H as B,R as L,L as A,A as p}from"./index-bdnYm6zW.js";import{I as d,A as I}from"./AdPopup-kzghAIMP.js";const $=({blogTitle:l})=>{const s=window.location.href;return e.jsx("div",{children:e.jsx("button",{className:"p-3 bg-blue-600 hover:bg-blue-800 text-white rounded-full shadow-md transform transition-all hover:scale-110",onClick:()=>{navigator.share?navigator.share({title:`Check out this blog: ${l}`,text:"Found an interesting blog on JobNirvana!",url:s}).then(()=>console.log("Shared successfully")).catch(o=>console.error("Error sharing:",o)):alert("Sharing not supported on this browser.")},children:e.jsx(D,{size:24})})})},j=({type:l})=>{switch(l){case"blog":return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"w-full h-96 bg-gray-300 animate-pulse"}),e.jsxs("div",{className:"lg:p-8 py-2",children:[e.jsx("div",{className:"h-10 bg-gray-300 animate-pulse rounded mb-4"}),e.jsx("div",{className:"h-6 bg-gray-300 animate-pulse rounded mb-4 w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-300 animate-pulse rounded mb-6 w-1/6"}),e.jsx("div",{className:"h-4 bg-gray-300 animate-pulse rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 animate-pulse rounded mb-6"})]})]});case"latestBlogs":return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4",children:[e.jsx("div",{className:"h-6 bg-gray-300 animate-pulse rounded mb-4"}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,o)=>e.jsx("div",{className:"h-20 bg-gray-300 animate-pulse rounded mb-4"},o))})]});default:return null}},O=()=>{var u,b;const{slug:l}=k(),[s,o]=r.useState(null),[f,w]=r.useState([]),[g,m]=r.useState(""),[y,h]=r.useState(!0),[v,x]=r.useState(!0);return r.useEffect(()=>{const t=async()=>{try{const a=await fetch(`${p}/blogs/blog/${l}`),i=await a.json();a.ok?(o(i),h(!1)):m(i.message||"Blog not found")}catch{m("Error fetching blog"),h(!1)}},n=async()=>{try{const a=await fetch(`${p}/blogs/all-blogs`),i=await a.json();if(a.ok){const N=i.sort((c,S)=>new Date(S.publishedDate)-new Date(c.publishedDate)).filter(c=>c.slug!==l).slice(0,10);w(N),x(!1)}}catch(a){console.error("Error fetching latest blogs",a),x(!1)}};t(),n()},[l]),e.jsxs("div",{className:"bg-gray-50 min-h-screen lg:py-12 py-6 px-4",children:[g&&e.jsx("p",{className:"text-red-500 text-center text-lg font-semibold mb-4",children:g}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col lg:flex-row lg:gap-10 gap-8",children:[e.jsx("div",{className:"flex-1",children:y?e.jsx(j,{type:"blog"}):s&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsxs("title",{children:[s.title," | JobNirvana-Blogs"]}),e.jsx("meta",{name:"description",content:s.content.slice(0,160)}),e.jsx("meta",{name:"keywords",content:s.tags?s.tags.join(", "):"blog, article"}),e.jsx("meta",{property:"og:title",content:s.title}),e.jsx("meta",{property:"og:description",content:s.content.slice(0,160)}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{property:"og:image",content:s.thumbnail}),e.jsx("meta",{property:"og:url",content:`${window.location.href}`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("link",{rel:"canonical",href:`${window.location.href}`}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:s.title||"Default Blog Title",description:((u=s.content)==null?void 0:u.slice(0,160).replace(/["<>]/g,""))||"Default Blog Description",image:s.thumbnail||"https://i.imgur.com/0qGt7qj.png",author:{"@type":"Person",name:s.author||"Admin"},datePublished:s.publishedDate||new Date().toISOString(),dateModified:s.publishedDate||new Date().toISOString(),mainEntityOfPage:window.location.href,publisher:{"@type":"Organization",name:"JobNirvana",logo:{"@type":"ImageObject",url:"https://i.imgur.com/0qGt7qj.png"}}})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[s.thumbnail&&e.jsxs("div",{className:"relative h-64 lg:h-96 w-full",children:[e.jsx("img",{src:s.thumbnail,alt:`Thumbnail for ${s.title}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-xs font-bold rounded-full uppercase tracking-wide mb-3 inline-block shadow-lg",children:s.category}),e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-white leading-tight shadow-black drop-shadow-lg",children:s.title})]})]}),e.jsxs("div",{className:"lg:p-10 p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 pb-8 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold uppercase",children:((b=s.author)==null?void 0:b[0])||"A"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold text-gray-900",children:s.author||"JobNirvana Team"}),e.jsx("p",{className:"text-gray-500",children:new Date(s.publishedDate).toLocaleDateString()})]})]}),e.jsx($,{blogTitle:s.title})]}),e.jsx("div",{className:"prose prose-lg prose-blue max-w-none text-gray-700 leading-relaxed font-sans ql-editor",children:(()=>{const t=s.content.split(/<\/p>/);return t.map((n,a)=>e.jsxs(L.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:`${n}</p>`}}),(a+1)%10===0&&a<t.length-1&&e.jsx(d,{})]},a))})()}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"mt-10 pt-8 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-3 uppercase tracking-wider",children:"Related Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((t,n)=>e.jsxs("span",{className:"px-4 py-2 bg-gray-50 text-gray-600 hover:text-blue-600 rounded-lg text-sm font-medium border border-gray-200 transition-colors cursor-pointer",children:["#",t]},n))})]}),e.jsx("div",{className:"mt-8",children:e.jsx(d,{})})]})]})]})}),e.jsxs("div",{className:"w-full lg:w-1/3 space-y-8",children:[v?e.jsx(j,{type:"latestBlogs"}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-gray-100 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Latest Articles"})}),e.jsx("div",{className:"p-2",children:f.map(t=>e.jsxs(A,{to:`/blog/${t.slug}`,className:"flex gap-4 p-3 hover:bg-blue-50/50 rounded-xl transition-colors group",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100",children:t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"})}),e.jsxs("div",{className:"flex-1 min-w-0 py-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider block mb-1",children:"New"}),e.jsx("h4",{className:"text-sm font-bold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-2 mb-1",children:t.title}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(t.publishedDate).toLocaleDateString()})]})]},t.slug))})]}),e.jsx(d,{}),e.jsx(I,{})]})]})]})};export{O as default};
