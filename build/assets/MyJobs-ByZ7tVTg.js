import{u as S,r as i,d as L,j as e,H as $,m as j,L as x,A as f}from"./index-bdnYm6zW.js";import{Q as C,B as c}from"./react-toastify.esm-Bb8Jn5AM.js";import{b as T,c as _,d as D,e as F,f as I,M as O}from"./index-DBDKlf8h.js";/* empty css                      */const z=()=>{const{user:d,getAccessTokenSilently:h,isAuthenticated:m,loginWithRedirect:g}=S(),[p,b]=i.useState([]),[N,w]=i.useState(""),[v,J]=i.useState(!0),[s,y]=i.useState(1),l=8;L(),i.useEffect(()=>{m?d&&(async()=>{try{const r=await h(),n=await fetch(`${f}/jobs/myJobs/${d.email}`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error("Failed");const A=await n.json();b(A)}catch(r){console.error("Error fetching jobs:",r),c.error("Failed to fetch jobs.")}finally{J(!1)}})():g()},[m,d,h,g]);const o=s*l,P=o-l,a=p.filter(t=>t.jobTitle.toLowerCase().includes(N.toLowerCase())),u=a.slice(P,o),k=()=>{o<a.length&&y(s+1)},M=()=>{s>1&&y(s-1)},E=async t=>{if(window.confirm("Are you sure you want to delete this job?"))try{(await fetch(`${f}/jobs/job/${t}`,{method:"DELETE"})).ok?(c.success("Job deleted successfully!"),b(p.filter(n=>n._id!==t))):c.error("Failed to delete.")}catch{c.error("Error deleting job.")}};return v?e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-10 px-4 sm:px-6 lg:px-8",children:[e.jsx($,{children:e.jsx("title",{children:"My Jobs | JobNirvana"})}),e.jsx(C,{}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Jobs"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage all your job postings in one place"})]}),e.jsx(x,{to:"/post-job",children:e.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-transform hover:scale-105",children:[e.jsx(T,{className:"text-xl"})," Post New Job"]})})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(_,{className:"absolute left-4 top-3.5 text-gray-400 text-xl"}),e.jsx("input",{type:"text",placeholder:"Search by job title...",onChange:t=>w(t.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow shadow-sm"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/80 text-gray-600 text-sm uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4 font-semibold",children:"No."}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Job Title"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Company"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Salary"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:u.length>0?u.map((t,r)=>e.jsxs(j.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:r*.05},className:"hover:bg-blue-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-500",children:r+1+(s-1)*l}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:t.jobTitle}),e.jsx("div",{className:"text-xs text-gray-400",children:t.employmentType})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600 flex items-center gap-2",children:t.companyName}),e.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[t.minPrice,"k - ",t.maxPrice,"k"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(x,{to:`/edit-job/${t._id}`,children:e.jsx("button",{className:"p-2 text-blue-600 bg-blue-100 rounded-lg hover:bg-blue-600 hover:text-white transition-colors",title:"Edit",children:e.jsx(D,{className:"text-lg"})})}),e.jsx(x,{to:`/job-applicants/${t._id}`,children:e.jsx("button",{className:"p-2 text-purple-600 bg-purple-100 rounded-lg hover:bg-purple-600 hover:text-white transition-colors",title:"View Applicants",children:e.jsx(F,{className:"text-lg"})})}),e.jsx("button",{onClick:()=>E(t._id),className:"p-2 text-red-600 bg-red-100 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:"Delete",children:e.jsx(I,{className:"text-lg"})})]})})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(O,{className:"text-6xl text-gray-200 mb-4"}),e.jsx("p",{className:"text-lg",children:"No jobs found."})]})})})})]})}),a.length>l&&e.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-center gap-4 bg-gray-50/50",children:[e.jsx("button",{onClick:M,disabled:s===1,className:`px-4 py-2 rounded-lg font-medium transition ${s===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white border hover:bg-gray-100 shadow-sm text-gray-700"}`,children:"Previous"}),e.jsxs("span",{className:"flex items-center text-gray-600",children:["Page ",s," of ",Math.ceil(a.length/l)]}),e.jsx("button",{onClick:k,disabled:o>=a.length,className:`px-4 py-2 rounded-lg font-medium transition ${o>=a.length?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white border hover:bg-gray-100 shadow-sm text-gray-700"}`,children:"Next"})]})]})]})]})};export{z as default};
