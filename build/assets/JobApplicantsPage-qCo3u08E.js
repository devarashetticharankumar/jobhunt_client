import{l as j,u as g,r,A as n,j as e,H as u,m as b,L as y}from"./index-Dc3DlMvd.js";import{A as f,q as N,o as v,B as w,k as A,s as k}from"./index-NqCwrgSu.js";import{B as l,Q as C}from"./react-toastify.esm-XnmEAQu3.js";/* empty css                      */const $=()=>{const{jobId:o}=j();g();const[a,c]=r.useState([]),[x,m]=r.useState(!0);r.useState(""),r.useEffect(()=>{h()},[o]);const h=async()=>{try{const t=await fetch(`${n}/applications/job/${o}`);if(!t.ok)throw new Error("Failed to fetch applicants");const s=await t.json();c(s)}catch(t){console.error("Error:",t),l.error("Failed to load applicants")}finally{m(!1)}},d=async(t,s)=>{try{(await fetch(`${n}/applications/status/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok?(l.success(`Applicant marked as ${s}`),c(a.map(i=>i._id===t?{...i,status:s}:i))):l.error("Failed to update status")}catch{l.error("Error updating status")}};return x?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-10 px-4 sm:px-6 lg:px-8",children:[e.jsxs(u,{children:[e.jsx("title",{children:"Job Applicants | JobNirvana"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx(C,{}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-8 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(y,{to:"/my-job",className:"text-gray-500 hover:text-blue-600 flex items-center gap-2 mb-2 transition-colors",children:[e.jsx(f,{})," Back to My Jobs"]}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Applicants (",a.length,")"]}),e.jsx("p",{className:"text-gray-500",children:"Manage applications for this job position"})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/80 text-gray-600 text-sm uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Candidate"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Contact"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Cover Letter"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Resume"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.length>0?a.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-full",children:e.jsx(N,{})}),t.applicantName]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 ml-9",children:["Applied: ",new Date(t.appliedAt).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(v,{className:"text-gray-400"})," ",t.applicantEmail]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"max-w-xs truncate text-gray-600",title:t.coverLetter||"No cover letter provided",children:t.coverLetter||e.jsx("span",{className:"text-gray-300 italic",children:"None"})})}),e.jsx("td",{className:"px-6 py-4",children:t.resumePath?e.jsxs("a",{href:`${n}/${t.resumePath.replace(/\\/g,"/")}`,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-blue-100 text-blue-600 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(w,{})," Download"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Unavailable"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${t.status==="shortlisted"?"bg-green-100 text-green-700":t.status==="rejected"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>d(t._id,"shortlisted"),className:"p-2 text-green-600 bg-green-50 rounded-lg hover:bg-green-600 hover:text-white transition-colors",title:"Shortlist",children:e.jsx(A,{className:"text-lg"})}),e.jsx("button",{onClick:()=>d(t._id,"rejected"),className:"p-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:"Reject",children:e.jsx(k,{className:"text-lg"})})]})})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No applications found for this job yet."})})})]})})})]})]})};export{$ as default};
