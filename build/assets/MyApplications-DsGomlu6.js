import{u as A,r as o,A as P,j as e,H as S,R as F,m as I,L as d,ao as L,i as C,D as M}from"./index-Dc3DlMvd.js";import{B as E,Q as O}from"./react-toastify.esm-XnmEAQu3.js";import{C as R,D as U,a as D}from"./index-NqCwrgSu.js";/* empty css                      */import{P as J}from"./ProfileCard-Bjo5kHnP.js";import{I as g}from"./InArticleAd-BdgRI0ZF.js";import{S as $}from"./SkeletonLoading-DORIwaa_.js";const K=()=>{const{user:s,isAuthenticated:c,loginWithRedirect:p}=A(),[l,j]=o.useState([]),[x,u]=o.useState(!0),[a,m]=o.useState(1),i=8,y={name:(s==null?void 0:s.name)||"Job Seeker",role:"Job Seeker",location:"India",photoUrl:(s==null?void 0:s.picture)||""};o.useEffect(()=>{!x&&c===!1?p():s&&f()},[c,s]);const f=async()=>{try{const t=await fetch(`${P}/applications/my-applications/${s.email}`);if(!t.ok)throw new Error("Failed to fetch");const r=await t.json();j(r)}catch(t){console.error("Error:",t),E.error("Failed to load applications")}finally{u(!1)}},b=a*i,N=b-i,h=l.slice(N,b),n=Math.ceil(l.length/i),w=()=>{a<n&&(m(a+1),window.scrollTo({top:0,behavior:"smooth"}))},v=()=>{a>1&&(m(a-1),window.scrollTo({top:0,behavior:"smooth"}))},k=t=>{switch(t){case"hired":return"bg-green-50 text-green-700 border-green-100";case"rejected":return"bg-red-50 text-red-700 border-red-100";case"external-click":return"bg-yellow-50 text-yellow-700 border-yellow-100";default:return"bg-blue-50 text-blue-700 border-blue-100"}};return e.jsxs("div",{className:"min-h-screen bg-[#F8F9FA] font-sans pb-12",children:[e.jsxs(S,{children:[e.jsx("title",{children:"My Applications | JobNirvana"}),e.jsx("meta",{name:"robots",content:"noindex"})]}),e.jsx(O,{}),e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"max-w-[1240px] mx-auto px-4 py-4",children:e.jsxs("h1",{className:"text-xl font-bold text-[#091e42]",children:["My Applications (",l.length,")"]})})}),e.jsx("div",{className:"max-w-[1240px] mx-auto px-4 pt-8",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-12 gap-6 items-start",children:[e.jsx("div",{className:"hidden lg:block lg:col-span-3 sticky top-24",children:e.jsx(J,{user:y})}),e.jsx("div",{className:"col-span-12 lg:col-span-6 space-y-4",children:x?e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:e.jsx($,{})}):h.length>0?e.jsxs(e.Fragment,{children:[h.map((t,r)=>e.jsxs(F.Fragment,{children:[e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.05},className:"bg-white border border-gray-200 rounded-xl p-5 hover:shadow-md transition-shadow relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{to:`/job/${t.jobId}`,className:"text-lg font-bold text-[#091e42] hover:text-blue-600 transition-colors",children:t.jobTitle}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600 mt-1",children:[e.jsx(L,{className:"text-gray-400"}),t.companyName,e.jsxs("span",{className:"flex items-center gap-0.5 text-xs text-orange-500 font-bold ml-1",children:[e.jsx(C,{})," 4.0"]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${k(t.status)}`,children:t.status==="external-click"?"Applied on Ext Site":t.status||"Applied"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"text-gray-400"}),"Applied on ",new Date(t.appliedAt).toLocaleDateString()]}),e.jsx("div",{className:"hidden sm:block text-gray-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"text-gray-400 text-sm"}),"Remote / On-site"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-dashed border-gray-100",children:[e.jsx(d,{to:`/job/${t.jobId}`,className:"text-blue-600 font-bold text-sm hover:underline",children:"View Job Details"}),t.applyUrl&&e.jsxs("a",{href:t.applyUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-gray-500 hover:text-blue-600 text-sm font-medium",children:["Visit Source ",e.jsx(U,{})]})]})]}),(r+1)%4===0&&e.jsx("div",{className:"py-2",children:e.jsx(g,{})})]},t._id)),e.jsxs("div",{className:"flex items-center justify-center gap-4 py-6",children:[e.jsx("button",{onClick:v,disabled:a===1,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-sm font-bold text-gray-700 disabled:opacity-50 hover:bg-gray-50 transition-colors",children:"Prev"}),e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Page ",a," of ",n]}),e.jsx("button",{onClick:w,disabled:a>=n,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-sm font-bold text-gray-700 disabled:opacity-50 hover:bg-gray-50 transition-colors",children:"Next"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl border border-dashed border-gray-300 p-12 text-center",children:[e.jsx(D,{className:"text-6xl text-gray-200 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No applications yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start applying to jobs to track them here."}),e.jsx(d,{to:"/jobs",className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200",children:"Browse Jobs"})]})}),e.jsxs("div",{className:"hidden lg:block lg:col-span-3 space-y-6 sticky top-24",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-full flex items-center justify-center",children:"ðŸ“ˆ"}),e.jsx("h4",{className:"font-bold text-gray-900 text-sm",children:"Application Insights"})]}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Keep your profile updated to increase your chances of getting noticed by recruiters by 40%."}),e.jsx("button",{className:"w-full mt-4 py-2 border border-blue-600 text-blue-600 rounded-lg text-xs font-bold hover:bg-blue-50 transition",children:"Update Profile"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-2 overflow-hidden",children:[e.jsx("span",{className:"text-[10px] text-gray-300 uppercase block mb-1 text-center font-bold tracking-widest",children:"Advertisement"}),e.jsx(g,{})]})]})]})})]})};export{K as default};
