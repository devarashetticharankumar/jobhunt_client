import{l as E,u as M,r,A as k,j as e,H as D,ao as P,s as R,i as d,L as W,h as B,ap as U}from"./index-Dc3DlMvd.js";import{M as V,f as H}from"./index-NqCwrgSu.js";import{Q as q,B as x}from"./react-toastify.esm-XnmEAQu3.js";import{I as C}from"./InArticleAd-BdgRI0ZF.js";const Q=()=>{var v,y,N,w,_;const{companyName:o}=E(),{user:m,isAuthenticated:h,loginWithRedirect:b}=M(),[t,A]=r.useState(null),[S,I]=r.useState(!0),[l,c]=r.useState("jobs"),[p,L]=r.useState(5),[g,u]=r.useState(""),[T,f]=r.useState(!1);r.useEffect(()=>{j()},[o]);const j=async()=>{try{const s=await fetch(`${k}/reviews/${encodeURIComponent(o)}`);if(!s.ok)throw new Error("Failed to fetch");const a=await s.json();A(a)}catch(s){console.error("Error:",s)}finally{I(!1)}},J=async s=>{if(s.preventDefault(),!h)return b();f(!0);try{(await fetch(`${k}/reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:o,rating:p,reviewText:g,reviewerName:m.name,reviewerEmail:m.email})})).ok?(x.success("Review posted successfully!"),u(""),j()):x.error("Failed to post review")}catch{x.error("Something went wrong")}finally{f(!1)}},$=s=>{const a=new Date(s),i=Math.abs(new Date-a),n=Math.ceil(i/(1e3*60*60*24));return n===1?"1 day ago":n<30?`${n} days ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`};return S?e.jsx("div",{className:"min-h-screen flex justify-center items-center",children:e.jsx("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t?e.jsxs("div",{className:"min-h-screen bg-[#F8F9FA] font-sans text-[#17171d] pb-20",children:[e.jsxs(D,{children:[e.jsxs("title",{children:[t.companyName," Careers & Reviews | JobNirvana"]}),e.jsx("meta",{name:"description",content:`Explore careers at ${t.companyName}. View active jobs, employee reviews, and company culture.`})]}),e.jsx(q,{}),e.jsxs("div",{className:"bg-white shadow-[0_1px_4px_rgba(0,0,0,0.08)] mb-6",children:[e.jsx("div",{className:"h-32 md:h-48 bg-gradient-to-r from-blue-600 to-indigo-700 relative overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 bg-black/10"})}),e.jsxs("div",{className:"max-w-[1240px] mx-auto px-4 pb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-end gap-6 -mt-12 mb-6",children:[e.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-white rounded-xl shadow-lg border border-gray-100 p-2 flex items-center justify-center relative z-10",children:e.jsx("img",{src:((v=t.companyInfo)==null?void 0:v.logo)||"/default-logo.png",alt:t.companyName,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 md:mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#091e42]",children:t.companyName}),e.jsx(V,{className:"text-blue-500 text-xl"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{}),e.jsx("span",{children:"Internet & Tech"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{}),e.jsx("span",{children:((N=(y=t.activeJobs[0])==null?void 0:y.jobLocation)==null?void 0:N.split(",")[0])||"Global"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{}),e.jsx("span",{children:"10k+ Employees"})]})]})]}),e.jsxs("div",{className:"flex gap-3 md:mb-3",children:[e.jsx("button",{onClick:()=>{var s;return(s=document.getElementById("review-form"))==null?void 0:s.scrollIntoView({behavior:"smooth"})},className:"px-5 py-2 rounded-full border border-blue-600 text-blue-600 font-bold text-sm hover:bg-blue-50 transition",children:"Write Review"}),e.jsx("button",{className:"px-6 py-2 rounded-full bg-blue-600 text-white font-bold text-sm hover:bg-blue-700 transition shadow-sm",children:"Follow"})]})]}),e.jsxs("div",{className:"flex items-center gap-8 border-t border-gray-100 pt-4 hidden md:flex",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-orange-500 font-bold text-xl",children:[e.jsx(d,{})," ",e.jsx("span",{children:t.averageRating})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.reviewCount," Reviews)"]})]}),e.jsx("div",{className:"h-8 w-[1px] bg-gray-200"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-gray-900 leading-none",children:t.activeJobs.length}),e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Active Jobs"})]})]})]})]}),e.jsxs("div",{className:"max-w-[1240px] mx-auto px-4 flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"w-full lg:w-[68%]",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-[0_1px_4px_rgba(0,0,0,0.08)] mb-6 overflow-hidden sticky top-[72px] z-20",children:e.jsxs("div",{className:"flex border-b border-gray-100",children:[e.jsx("button",{onClick:()=>c("about"),className:`flex-1 py-4 text-sm font-bold text-center border-b-2 transition ${l==="about"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:"About"}),e.jsxs("button",{onClick:()=>c("jobs"),className:`flex-1 py-4 text-sm font-bold text-center border-b-2 transition ${l==="jobs"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:["Jobs (",t.activeJobs.length,")"]}),e.jsxs("button",{onClick:()=>c("reviews"),className:`flex-1 py-4 text-sm font-bold text-center border-b-2 transition ${l==="reviews"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:["Reviews (",t.reviewCount,")"]})]})}),l==="jobs"&&e.jsxs("div",{className:"space-y-4",children:[t.activeJobs.length>0?t.activeJobs.map(s=>e.jsx(W,{to:`/job/${s._id}`,className:"block bg-white rounded-xl shadow-[0_1px_4px_rgba(0,0,0,0.08)] p-5 hover:shadow-md transition card-hover-effect border border-transparent hover:border-blue-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-[#091e42] mb-1",children:s.jobTitle}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{})," ",s.experienceLevel||"0-5 Yrs"]}),e.jsx("span",{children:"|"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{})," ",s.jobLocation]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500",children:[e.jsx("span",{className:"bg-gray-50 px-2 py-1 rounded",children:s.employmentType}),e.jsxs("span",{className:"bg-gray-50 px-2 py-1 rounded",children:["Posted: ",$(s.createdAt)]})]})]}),s.companyLogo&&e.jsx("img",{src:s.companyLogo,className:"w-12 h-12 object-contain border border-gray-100 rounded p-1",alt:"logo"})]})},s._id)):e.jsx("div",{className:"text-center py-10 bg-white rounded-xl border border-dashed text-gray-500",children:"No active jobs found."}),e.jsx("div",{className:"my-6",children:e.jsx(C,{})})]}),l==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[t.reviews.map(s=>{var a;return e.jsxs("div",{className:"bg-white rounded-xl shadow-[0_1px_4px_rgba(0,0,0,0.08)] p-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-700 font-bold",children:(a=s.reviewerName)==null?void 0:a.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:s.reviewerName}),e.jsx("div",{className:"flex text-yellow-400 text-xs",children:[...Array(5)].map((F,i)=>e.jsx(d,{className:i<Math.round(s.rating)?"text-yellow-400":"text-gray-200"},i))})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:['"',s.reviewText,'"']})]},s._id)}),e.jsxs("div",{className:"bg-white rounded-xl shadow-[0_1px_4px_rgba(0,0,0,0.08)] p-6",id:"review-form",children:[e.jsx("h3",{className:"font-bold text-lg text-[#091e42] mb-4",children:"Write a Review"}),h?e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 uppercase",children:"Rate Company"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>L(s),className:"text-2xl hover:scale-110 transition",children:s<=p?e.jsx(d,{className:"text-yellow-400"}):e.jsx(U,{className:"text-gray-300"})},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 uppercase",children:"Your Review"}),e.jsx("textarea",{value:g,onChange:s=>u(s.target.value),className:"w-full p-4 border border-gray-200 rounded-xl text-sm focus:border-blue-500 outline-none h-32",placeholder:"What's it like working here?",required:!0})]}),e.jsx("button",{type:"submit",disabled:T,className:"w-full py-3 bg-blue-600 text-white font-bold rounded-xl shadow-sm hover:bg-blue-700 transition disabled:opacity-70",children:"Post Review"})]}):e.jsxs("div",{className:"text-center bg-gray-50 rounded-lg p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please log in to share your experience."}),e.jsx("button",{onClick:()=>b(),className:"px-6 py-2 bg-blue-600 text-white rounded-full text-sm font-bold",children:"Log In"})]})]})]}),l==="about"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-[0_1px_4px_rgba(0,0,0,0.08)] p-6 md:p-8",children:[e.jsxs("h2",{className:"text-lg font-bold text-[#091e42] mb-4",children:["About ",t.companyName]}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:((w=t.companyInfo)==null?void 0:w.description)||`${t.companyName} is a leading company in the Technology sector. We are committed to innovation and excellence. Join us to build the future.`}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-6 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold mb-1",children:"Headquarters"}),e.jsx("span",{className:"text-gray-800 font-medium",children:((_=t.activeJobs[0])==null?void 0:_.jobLocation)||"Global"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold mb-1",children:"Employees"}),e.jsx("span",{className:"text-gray-800 font-medium",children:"10,000+"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-gray-400 uppercase font-bold mb-1",children:"Website"}),e.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:underline",children:"Visit Website"})]})]})]})]}),e.jsxs("div",{className:"w-full lg:w-[32%] space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-[0_1px_4px_rgba(0,0,0,0.08)] p-6",children:[e.jsx("h3",{className:"font-bold text-[#091e42] mb-4",children:"Why Join Us?"}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-green-500",children:"✓"})," Innovation-driven culture"]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-green-500",children:"✓"})," Competitive salary & benefits"]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-green-500",children:"✓"})," Remote work options"]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-green-500",children:"✓"})," Career growth opportunities"]})]})]}),e.jsx("div",{className:"sticky top-24",children:e.jsx(C,{})})]})]})]}):e.jsx("div",{className:"text-center py-20 text-gray-500",children:"Company not found."})};export{Q as default};
