import{r as i,u as k,j as e,x as b,H as E,m as n,L as l,y as B,z as $,B as F,A as j}from"./index-bdnYm6zW.js";import{B as m}from"./react-toastify.esm-Bb8Jn5AM.js";import{T as y,a as I,b as S,c as D,d as L,e as M,f as _,g as z,h as P,i as V,j as U,k as H,l as J,m as O,n as W}from"./TemplateClassic-ERqEOubQ.js";const Q=()=>{const[u,x]=i.useState([]),[h,w]=i.useState(null),[p,g]=i.useState(!0),{getAccessTokenSilently:o,isAuthenticated:c,loginWithRedirect:v,user:a}=k(),N=async()=>{try{const t=await o(),s=await fetch(`${j}/resumes/all-resumes?t=${Date.now()}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"}}),r=await s.json();if(!s.ok)throw new Error(r.message||"Failed to fetch resumes");x(r.data||[])}catch(t){console.error(t),w(t.message)}finally{g(!1)}};i.useEffect(()=>{c?N():g(!1)},[c,o]);const T=async t=>{if(window.confirm("Are you sure you want to delete this resume?"))try{const s=await o(),r=await fetch(`${j}/resumes/resume/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});if(r.ok)m.success("Resume deleted successfully"),x(d=>d.filter(A=>A._id!==t));else{const d=await r.json();m.error(d.message||"Failed to delete resume")}}catch(s){console.error("Error deleting resume:",s),m.error("An error occurred while deleting the resume")}},C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},f={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},R=(t,s)=>{switch(t){case"modern":return e.jsx(y,{data:s});case"professional":return e.jsx(W,{data:s});case"creative":return e.jsx(O,{data:s});case"minimalist":return e.jsx(J,{data:s});case"executive":return e.jsx(H,{data:s});case"simple":return e.jsx(U,{data:s});case"academic":return e.jsx(V,{data:s});case"tech":return e.jsx(P,{data:s});case"designer":return e.jsx(z,{data:s});case"compact":return e.jsx(_,{data:s});case"bold":return e.jsx(M,{data:s});case"corporate":return e.jsx(L,{data:s});case"elegant":return e.jsx(D,{data:s});case"startup":return e.jsx(S,{data:s});case"classic":return e.jsx(I,{data:s});default:return e.jsx(y,{data:s})}};return p?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):h?e.jsxs("div",{className:"flex justify-center items-center h-screen text-red-500",children:["Error: ",h]}):c?e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 mt-16 font-sans",children:[e.jsxs(E,{children:[e.jsx("title",{children:"Free AI Resume Builder - Create CVs Online | JobNirvana"}),e.jsx("meta",{name:"description",content:"Build professional resumes/CVs in minutes with our free AI-powered Resume Builder. Choose from modern templates, customize your profile, and download PDF."}),e.jsx("meta",{name:"keywords",content:"resume builder, free resume builder, create cv online, cv maker, resume templates, job nirvana, career tools"}),e.jsx("meta",{property:"og:title",content:"Free AI Resume Builder - JobNirvana"}),e.jsx("meta",{property:"og:description",content:"Create professional resumes in minutes with our free AI Resume Builder. Multiple templates available."}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:`${window.location.origin}/resume-builder`}),e.jsx("link",{rel:"canonical",href:`${window.location.origin}/resume-builder`})]}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-12",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight mb-2",children:"My Resumes"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage and customize your professional profiles"})]}),e.jsx("div",{className:"mt-4 md:mt-0 flex items-center gap-4",children:a&&e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-sm",children:[e.jsx("img",{src:a.picture,alt:a.name,className:"w-8 h-8 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.name})]})})]}),e.jsxs(n.div,{variants:C,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsx(n.div,{variants:f,children:e.jsxs(l,{to:"/create-resume",className:"group h-full min-h-[400px] border-2 border-dashed border-blue-300 hover:border-blue-500 bg-blue-50/50 hover:bg-blue-50 rounded-3xl flex flex-col items-center justify-center transition-all cursor-pointer",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center text-blue-500 group-hover:scale-110 group-hover:shadow-md transition-all duration-300 mb-4",children:e.jsx(B,{className:"text-2xl"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-blue-600 transition-colors",children:"Create New Resume"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Start from scratch"})]})}),u.map(t=>{var s;return e.jsxs(n.div,{variants:f,whileHover:{y:-5},className:"bg-white rounded-3xl p-6 shadow-sm hover:shadow-xl border border-gray-100 transition-all duration-300 flex flex-col justify-between overflow-hidden",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"text-xs font-semibold px-3 py-1 bg-gray-100 text-gray-600 rounded-full",children:t.template||"Modern"}),e.jsxs("span",{className:"text-xs font-semibold px-3 py-1 bg-gray-100 text-gray-600 rounded-full",children:["Updated: ",new Date(t.lastModified||Date.now()).toLocaleDateString()]})]}),e.jsxs("div",{className:"w-full h-64 bg-gray-100 mb-4 rounded-xl overflow-hidden relative border border-gray-200",children:[e.jsx("div",{className:"absolute top-0 left-0 w-[800px] transform origin-top-left scale-[0.35] pointer-events-none",children:R(t.template||"modern",t)}),e.jsx(l,{to:`/resume/${t._id}`,className:"absolute inset-0 z-10 block"})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 truncate",children:t.wantedJobTitle||((s=t.personalInfo)!=null&&s.firstName?`${t.personalInfo.firstName}'s Resume`:"Untitled Resume")})]}),e.jsxs("div",{className:"flex gap-2 mt-auto",children:[e.jsxs(l,{to:`/resume/${t._id}`,className:"flex-1 bg-gray-50 text-gray-700 py-2.5 rounded-xl font-medium hover:bg-gray-100 transition-colors flex items-center justify-center gap-2 text-xs border border-gray-200",children:[e.jsx(b,{className:"text-gray-400"})," View"]}),e.jsxs(l,{to:`/create-resume?id=${t._id}`,className:"flex-1 bg-indigo-600 text-white py-2.5 rounded-xl font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-md shadow-indigo-100",children:[e.jsx($,{})," Edit"]}),e.jsx("button",{className:"p-2.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all border border-gray-100 hover:border-red-100",onClick:()=>T(t._id),children:e.jsx(F,{})})]})]},t._id)})]}),u.length===0&&!p&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center mt-12 py-12 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-500 mb-4",children:"No resumes found. Create your first one!"})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full text-center p-8 bg-white rounded-3xl shadow-xl border border-gray-100",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-600 text-3xl",children:e.jsx(b,{})}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-4",children:"Resume Builder"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Create professional resumes in minutes. Please log in to manage your resumes."}),e.jsx("button",{onClick:()=>v(),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-500/30",children:"Log In / Sign Up"})]})})};export{Q as default};
