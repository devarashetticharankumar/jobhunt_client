import{u as L,r as d,g as S,j as e,H as C,m as p,L as f,A as j}from"./index-Dc3DlMvd.js";import{Q as $,B as n}from"./react-toastify.esm-XnmEAQu3.js";import{c as T,d as D,e as F,g as I,p as R}from"./index-NqCwrgSu.js";/* empty css                      */const z=()=>{const{user:c,getAccessTokenSilently:g,isAuthenticated:x,loginWithRedirect:h}=L(),[y,b]=d.useState([]),[k,N]=d.useState(""),[w,v]=d.useState(!0),[t,m]=d.useState(1),l=8;S(),d.useEffect(()=>{x?c&&(async()=>{try{const a=await g(),i=await fetch(`${j}/blogs/all-blogs`,{headers:{Authorization:`Bearer ${a}`}});if(!i.ok)throw new Error("Failed");const P=await i.json();b(P)}catch(a){console.error("Error fetching blogs:",a),n.error("Failed to fetch blogs.")}finally{v(!1)}})():h()},[x,c,g,h]);const o=t*l,B=o-l,s=y.filter(r=>r.title.toLowerCase().includes(k.toLowerCase())),u=s.slice(B,o),A=()=>{o<s.length&&m(t+1)},E=()=>{t>1&&m(t-1)},M=async r=>{if(window.confirm("Are you sure you want to delete this blog?"))try{(await fetch(`${j}/blogs/blog/${r}`,{method:"DELETE"})).ok?(n.success("Blog deleted successfully!"),b(y.filter(i=>i.slug!==r))):n.error("Failed to delete.")}catch{n.error("Error deleting blog.")}};return w?e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-purple-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-10 px-4 sm:px-6 lg:px-8 transition-colors",children:[e.jsx(C,{children:e.jsx("title",{children:"My Blogs | JobNirvana"})}),e.jsx($,{}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Blogs"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage and edit your published articles"})]}),e.jsx(f,{to:"/create-blog",children:e.jsxs("button",{className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-transform hover:scale-105",children:[e.jsx(T,{className:"text-xl"})," Post New Blog"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 transition-colors",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-700/50",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(D,{className:"absolute left-4 top-3.5 text-gray-400 text-xl"}),e.jsx("input",{type:"text",placeholder:"Search by blog title...",onChange:r=>N(r.target.value),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 dark:text-white transition-shadow shadow-sm placeholder-gray-400"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/80 dark:bg-gray-700/80 text-gray-600 dark:text-gray-300 text-sm uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4 font-semibold",children:"No."}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Title"}),e.jsx("th",{className:"px-6 py-4 font-semibold",children:"Author"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.length>0?u.map((r,a)=>e.jsxs(p.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.05},className:"hover:bg-purple-50/50 dark:hover:bg-purple-900/10 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-500 dark:text-gray-400",children:a+1+(t-1)*l}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:r.title})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300",children:r.author||"Unknown"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(f,{to:`/blog/update/${r.slug}`,children:e.jsx("button",{className:"p-2 text-blue-600 bg-blue-100 hover:bg-blue-600 hover:text-white dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-600 dark:hover:text-white rounded-lg transition-colors",title:"Edit",children:e.jsx(F,{className:"text-lg"})})}),e.jsx("button",{onClick:()=>M(r.slug),className:"p-2 text-red-600 bg-red-100 hover:bg-red-600 hover:text-white dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-600 dark:hover:text-white rounded-lg transition-colors",title:"Delete",children:e.jsx(I,{className:"text-lg"})})]})})]},r._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(R,{className:"text-6xl text-gray-200 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg",children:"No blogs found."})]})})})})]})}),s.length>l&&e.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700 flex justify-center gap-4 bg-gray-50/50 dark:bg-gray-700/50",children:[e.jsx("button",{onClick:E,disabled:t===1,className:`px-4 py-2 rounded-lg font-medium transition ${t===1?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-white dark:bg-gray-800 border dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm text-gray-700 dark:text-gray-300"}`,children:"Previous"}),e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-300",children:["Page ",t," of ",Math.ceil(s.length/l)]}),e.jsx("button",{onClick:A,disabled:o>=s.length,className:`px-4 py-2 rounded-lg font-medium transition ${o>=s.length?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-white dark:bg-gray-800 border dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 shadow-sm text-gray-700 dark:text-gray-300"}`,children:"Next"})]})]})]})]})};export{z as default};
